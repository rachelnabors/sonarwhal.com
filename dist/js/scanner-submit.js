!function(){"use strict";var e,r=document.querySelector(".scan-overview").getAttribute("data-id"),t=[],s={error:"error",finished:"finished",pending:"pending",started:"started"},n={error:"error",pass:"pass",pending:"pending",warning:"warning"},i=document.querySelector(".scan-queue-bg-wrap"),a=document.querySelector(".scan-result-bg-wrap"),l=function(e){var r=new XMLHttpRequest,t=e.callback,s=e.url;return r.open(e.method||"GET",s,!0),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){if(t)return e.dontTransform?t(null,r.responseText):t(null,JSON.parse(r.responseText))}else if(t)return t(r.status,r.responseText);return null},r.send(e.params),r},o=function(e){e.forEach(function(e){e.results&&e.results.forEach(function(e){-1===t.indexOf(e.name)&&t.push(e.name)})})},u=function(e){return e.forEach(function(e){e.results&&(e.results=e.results.filter(function(e){return-1===t.indexOf(e.name)}))}),e},c=function(){return'{{#each results}}                     <div class="rule-result--details" aria-expanded="false" id="{{name}}">                         <div class="rule-result--details__header">                             <p class="rule-title">{{name}}: {{getLength messages status}}</p>                             <div class="rule-result__docs">                                 <a href="https://sonarwhal.com/docs/user-guide/rules/{{name}}.html" title="documentation for {{name}} rule"><img src="/images/results-docs-icon.svg" alt="" class="docs-icon" /></a>                                 <button title="show warning details" class="button--details">Open Details</button>                             </div>                         </div>                         {{#each messages}}                         <div class="rule-result--details__body">                             <p class="{{../status}}-badge uppercase-text">{{../status}}</p>                             <p>                                 {{message}}                             </p>                             {{#or resource sourceCode}}                             <div class="rule-result__code">                                 {{#if resource}}                                 <p>                                     <a target="_blank" rel="noopener noreferrer" href="{{resource}}">                                         {{cutUrlString resource}}{{normalizePosition location.line}}{{normalizePosition location.column}}                                     </a>                                 </p>                                 {{/if}}                                 {{#if sourceCode}}                                 <code>{{cutCodeString sourceCode}}</code>                                 {{/if}}                             </div>                             {{/or}}                         </div>                         {{/each}}                         {{#if thirdParty}}                             <div class="rule-result--details__footer-msg">                                 {{#if thirdParty.details}}                                     <p>To learn more visit</p>                                 {{else}}                                     <p>With the help of</p>                                 {{/if}}                                 {{#if thirdParty.link}}                                     <a href="{{thirdParty.link}}" target="_blank">                                 {{/if}}                                         <img src="{{thirdParty.logo.url}}" alt="{{thirdParty.logo.alt}}" class="{{thirdParty.logo.name}}-logo" />                                 {{#if thirdParty.link}}                                     </a>                                 {{/if}}                             </div>                         {{/if}}                     </div>                 {{/each}}'},d=function(e,r){var t=e();return Handlebars.compile(t)(r)},f=function(e,r){return!e||e.length<r?e:e.slice(0,r)+"..."+e.slice(e.length-r)},p=function(e,r){return e+(1===r?"":"s")},g=function(e,r,t,s,n,i){r>0?(e.classList.add("rule-list--failed"),e.innerHTML=r+" "+p(t,r),e.closest(".rule-tile").classList.add("rule-tile--failed")):(e.innerHTML=r+" "+p(t,r),i&&e.classList.add("rule-list--passed"),n&&e.closest(".rule-tile").classList.add("rule-tile--passed"))},m=function(e){return e.rules.every(function(e){return e.status!==s.pending})},h=function(e){return e.rules.every(function(e){return e.status===n.pass})},v=function(e){return e.filter(function(e){return e.status!==n.pass})},y=function(e){if(e.results&&0!==e.results.length){var r=document.getElementById(e.name),t=r.querySelector(".compiling__loader"),s=d(c,e);t.insertAdjacentHTML("beforebegin",s)}},_=function(e){var r=document.getElementById(e.name),t=r.querySelector(".compiling__loader");t&&r.removeChild(t)},b=function(e){var r=document.getElementById(e.name),t=r.querySelector(".compiling__loader");r.querySelector(".rule-result__message--passed")||(t&&r.removeChild(t),r.insertAdjacentHTML("beforeend",'<div class="rule-result--details">                    <div class="rule-result__message--passed">                        <p>No issues</p>                    </div>                </div>'))},w=function(e){return e.rules.every(function(e){return e.status!==n.pending})},S=function(e,r,t){var s="."+e.name+".errors",n="."+e.name+".warnings",i=e.statistics.errors,a=e.statistics.warnings,l=document.querySelector(s),o=document.querySelector(n);o.innerHTML=a+" Warnings",g(l,i,"Error",e.name,r,t),g(o,a,"Warning",e.name,r,t)},H=function(e){var r=e.updates,t=e.time,s=e.version,n=0,i=0;r.forEach(function(e){if(e.results){var r=h(e),t=w(e);r&&b(e),e.results=v(e.results),y(e),S(e,r,t),n+=e.statistics.errors,i+=e.statistics.warnings,m(e)&&_(e)}});for(var a=document.querySelectorAll("code"),l=0;l<a.length;l++)hljs.highlightBlock(a[l]);document.querySelector("#total-errors").innerHTML=n,document.querySelector("#total-warnings").innerHTML=i,document.querySelector(".scan-overview--time .scan-overview__body--purple").innerHTML=t,document.querySelector(".scan-overview--version .scan-overview__body--purple").innerHTML=s},q=function(){document.querySelector("#results-container").insertAdjacentHTML("beforebegin",'<div class="scan-error">        <p>        There was an error and we were only able to partially complete the scan. View the results below or        <a href="https://sonarwhal.com/scanner/">perform another scan</a>.    <p>    </div>')},P=function(){i.style.display="block",a.style.display="none"},T=function(){i.style.display="none",a.style.display="block"},L=function(e){return e&&1===e.length?"0"+e:e},k=function(){try{var e=document.querySelector(".scan-overview--time .scan-overview__body--purple"),r=e.innerHTML,t=r.split(":"),s=parseInt(t[0],10),n=parseInt(t[1],10);n++,n>=60&&(s++,n=0),e.innerHTML=L(s.toString())+":"+L(n.toString())}catch(e){}},M=function(e){var r=document.querySelector(".scan-overview__status");r.textContent=e,r.classList.remove("analyzing")},C=function(){var t=function(r,t){var n=t.status===s.finished,i=t.status===s.error,a=t.status===s.pending;if(r)return clearInterval(e),void console.error(r);if(a)P();else{T(),i&&q();var l=u(t.categories);if(H({time:t.time,updates:l,version:t.version}),o(t.categories),n||i)return clearInterval(e),void M(t.status)}setTimeout(C,5e3)},n="api/"+r,i={callback:t,url:n};e||(e=setInterval(k,1e3)),l(i)};window.history.pushState(null,null,r),function(){for(var e=document.querySelectorAll(".rule-result--details"),r=0;r<e.length;r++)t.push(e[r].id)}(),function(){Handlebars.registerPartial("ruleItem",'{{#each results}}                     <div class="rule-result--details" aria-expanded="false" id="{{name}}">                         <div class="rule-result--details__header">                             <p class="rule-title">{{name}}: {{getLength messages status}}</p>                             <div class="rule-result__docs">                                 <a href="https://sonarwhal.com/docs/user-guide/rules/{{name}}.html" title="documentation for {{name}} rule"><img src="/images/results-docs-icon.svg" alt="" class="docs-icon" /></a>                                 <button title="show warning details" class="button--details">Open Details</button>                             </div>                         </div>                         {{#each messages}}                         <div class="rule-result--details__body">                             <p class="{{../status}}-badge uppercase-text">{{../status}}</p>                             <p>                                 {{message}}                             </p>                             {{#or resource sourceCode}}                             <div class="rule-result__code">                                 {{#if resource}}                                 <p>                                     <a target="_blank" rel="noopener noreferrer" href="{{resource}}">                                         {{cutUrlString resource}}{{normalizePosition location.line}}{{normalizePosition location.column}}                                     </a>                                 </p>                                 {{/if}}                                 {{#if sourceCode}}                                 <code>{{cutCodeString sourceCode}}</code>                                 {{/if}}                             </div>                             {{/or}}                         </div>                         {{/each}}                         {{#if thirdParty}}                             <div class="rule-result--details__footer-msg">                                 {{#if thirdParty.details}}                                     <p>To learn more visit</p>                                 {{else}}                                     <p>With the help of</p>                                 {{/if}}                                 {{#if thirdParty.link}}                                     <a href="{{thirdParty.link}}" target="_blank">                                 {{/if}}                                         <img src="{{thirdParty.logo.url}}" alt="{{thirdParty.logo.alt}}" class="{{thirdParty.logo.name}}-logo" />                                 {{#if thirdParty.link}}                                     </a>                                 {{/if}}                             </div>                         {{/if}}                     </div>                 {{/each}}')}(),function(){Handlebars.registerHelper("or",function(e,r,t){return e||r?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("getLength",function(e,r){var t=e.length;return t+" "+r+(t>1?"s":"")}),Handlebars.registerHelper("cutUrlString",function(e){return f(e,20)}),Handlebars.registerHelper("cutCodeString",function(e){return f(e,150)}),Handlebars.registerHelper("normalizePosition",function(e){return e&&-1!==parseInt(e)?":"+e:""})}(),!function(){return"none"!==document.querySelector(".scan-queue-bg-wrap").style.display}()?C():setTimeout(C,1e4)}();